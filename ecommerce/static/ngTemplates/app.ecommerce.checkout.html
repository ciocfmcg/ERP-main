<div class="container-fluid" style="margin-top:20px;margin-bottom:20px;">
  <div class="col-md-10 col-md-offset-1 card bg-white" style="display:block;position:relative;min-height:760px;padding-left:0px;margin-bottom:30px;">

    <div class="col-md-2 hidden-sm hidden-xs  bg-purple" style="position:absolute; height:100%;">
      <div class="row" style="padding-left:40%; padding-top:20px;">
        <i class="fa fa-shopping-cart fa-4x"></i>
      </div>
      <h4 style="text-align:center;text-transform:capitalize;color:white;">
        Checkout
      </h4>
      <hr>
      <div style="position:absolute;left:0px;width:100%;display:block;" class="bg-purple">
        <ul class="nav padded sidebar-checkout" style="width:100%;padding:0px;margin:0px;display:block;height:603px;">
          <li ng-class="{activeTab: data.stage == 'review'}">
            <a>
              <div align="center">
                <i class="fa fa-check fa-2x pull-left"></i> Review
              </div>
            </a>
          </li>
          <li ng-class="{activeTab: data.stage == 'shippingDetails'}">
            <a>
              <div align="center">
                <i class="fa fa-truck fa-2x pull-left"></i> Shipment details
              </div>
            </a>
          </li>
          <li ng-class="{activeTab: data.stage == 'payment'}">
            <a>
              <div align="center">
                <i class="fa fa-credit-card fa-2x pull-left"></i> Pay
              </div>
            </a>
          </li>
          <li ng-if="data.stage=='confirmation'" ng-class="{activeTab: data.stage == 'confirmation'}">
            <a>
              <div align="center">
                <i class="fa fa-check-circle fa-2x pull-left"></i> Confirmation
              </div>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="row bg-purple hidden-md hidden-lg" style="margin-left:0px; height:10vh;  padding-bottom:25px; " >
      <div class="col-xs-12" >
          <h4 style="color:white;">
        <i class="fa fa-shopping-cart fa-2x"></i> Checkout
      </h4>
      </div>
    </div>

    <div class="row bg-purple hidden-md hidden-lg" style="margin-left:0px; height:10vh;  padding-bottom:25px; " >
      <div class="col-xs-4 text-center  " ng-class="{activeTopTab: data.stage == 'review'}" >
        <div class="row " style="padding:0px;" >
          <i class="fa fa-check"></i>
        </div>
        <span style="color:white">
          Review
        </span>
      </div>
      <div class="col-xs-4 text-center" ng-class="{activeTopTab: data.stage == 'shippingDetails'}"  >
        <div class="row " style="padding:0px;">
          <i class="fa fa-truck"></i>
        </div>
        <span style="color:white">
          Shipment
        </span>
      </div>
      <div class="col-xs-4 text-center" ng-class="{activeTopTab: data.stage == 'payment'}" >
        <div class="row " style="padding:0px;">
          <i class="fa fa-credit-card"></i>
        </div>
        <span style="color:white">
          Pay
        </span>
      </div>
      <div class="col-xs-1" ng-if="data.stage=='confirmation'" ng-class="{activeTopTab: data.stage == 'confirmation'}" >
        <div class="row">
          <i class="fa fa-check-circle pull-left"></i>
        </div>
      </div>
    </div>

    <div class="col-md-10 col-md-offset-2">
      <div class="container-fluid" style="margin-top:30px;">
        <div ng-if="data.stage == 'review'">
          <div class="row">
            <div class="container-fluid hidden-xs hidden-sm">

              <div class="row">
                <div class="col-md-3 ">
                  <span> <strong>Product</strong> </span>
                </div>
                <div class="col-md-offset-3 col-md-3 text-center">
                  <strong >Price</strong>
                </div>
                <div class="col-md-offset-1 col-md-1">
                  <strong>Qty</strong>
                </div>
                <div class="col-md-1">
                  <strong>Total</strong>
                </div>
              </div>

              <div ng-if="item">
                <div class="row" style="padding-top:30px;">
                  <div class="col-md-3">
                    <img style="width: 100%; height:100px;" class="img" ng-src="{{item.files[0].attachment}}" ng-if="item.files.length>0">
                    <img style="width: 100%; height:100px;" class="img" src="/static/images/ecommerce.jpg" ng-if="item.files==null">
                  </div>
                  <div class="col-md-3" style="height:100px;">
                    <h5 ng-if="item.product.name.length>30" style="margin:0px;  height:50px;">{{item.product.name.slice(0,30)}}...</h5>
                    <h5 ng-if="item.product.name.length<=30" style="margin:0px;  height:50px;">{{item.product.name}}</h5>
                  </div>
                  <div class="col-md-3">
                    <div class="row container-fluid">
                      <div class="col-md-6">
                          <span class="pull-right"  ng-if="item.product.discount>0" > <strike> <i class="fa fa-inr"></i> {{item.product.price.toFixed(2)}} </strike> </span>
                      </div>
                      <div class="col-md-6">
                          <span><i class="fa fa-inr"></i>{{item.product.discountedPrice.toFixed(2)}}</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-1">
                    <p> X </p>
                  </div>
                  <div class="col-md-1">
                    <input type="number" ng-change="changeQty()" ng-model="item.qty" name="" value="" style="width: 60px;">
                  </div>
                  <div class="col-md-1">
                    <p> <i class="fa fa-inr"></i> {{(item.product.discountedPrice * item.qty).toFixed(2) }} </p>
                  </div>
                </div>
              </div>

              <div ng-if="cartItems" ng-repeat="c in cartItems">
                <div class="row" style="padding-top:30px;">
                  <div class="col-md-3">
                    <img style="width: 100%; height:100px;" class="img" ng-src="{{c.product.files[0].attachment}}" ng-if="c.product.files.length>0">
                    <img style="width: 100%; height:100px;" class="img" src="/static/images/ecommerce.jpg" ng-if="c.product.files==null">
                  </div>
                  <div class="col-md-3" style="height:100px;">
                    <h5 ng-if="c.product.product.name.length>30" style="margin:0px;  height:50px;">{{c.product.product.name.slice(0,30)}}...</h5>
                    <h5 ng-if="c.product.product.name.length<=30" style="margin:0px;  height:50px;">{{c.product.product.name}}</h5>
                  </div>
                  <div class="col-md-3">
                    <div class="row container-fluid">
                      <div class="col-md-6">
                          <span class="pull-right"  ng-if="c.product.product.discount>0" > <strike> <i class="fa fa-inr"></i> {{c.product.product.price.toFixed(2)}} </strike> </span>
                      </div>
                      <div class="col-md-6">
                          <span><i class="fa fa-inr"></i> {{c.product.product.discountedPrice.toFixed(2)}}</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-1">
                    <p> X </p>
                  </div>
                  <div class="col-md-1">
                    <input type="number" ng-change="changeQty(c)" ng-model="c.qty" name="" value="" style="width: 60px;">
                  </div>
                  <div class="col-md-1">
                    <p > <i class="fa fa-inr"></i> {{(c.product.product.discountedPrice * c.qty).toFixed(2) }} </p>
                  </div>
                </div>
              </div>

            </div>


            <div class="hidden-lg hidden-md">

              <div ng-if="item">
                <div class="row">
                  <div class="col-xs-6">
                    <img style="width: 100%; height:65px;" class="img" ng-src="{{item.files[0].attachment}}" ng-if="item.files.length>0">
                    <img style="width: 100%; height:65px;" class="img" src="/static/images/ecommerce.jpg" ng-if="item.files==null">
                  </div>
                  <div class="col-xs-6">
                    <div class="row" style="padding:0px" >
                      <h6 ng-if="item.product.name.length>30" style="margin:0px;  height:50px;">{{item.product.name.slice(0,30)}}...</h6>
                      <h6 ng-if="item.product.name.length<=30" style="margin:0px;  height:50px;">{{item.product.name}}</h6>
                    </div>
                    <div class="row" style="padding:0px" >
                      <span  ng-if="item.product.discount>0" style="padding-right:5px;" > <strike> <i class="fa fa-inr"></i> {{item.product.price.toFixed(2)}} </strike> </span>
                      <span><i class="fa fa-inr"></i>{{item.product.discountedPrice.toFixed(2)}}</span>
                    </div>
                  </div>
                </div>
                <div class="row" style="padding-top:20px;" >
                  <div class="col-xs-2">
                    <span>Qty :</span>
                  </div>
                  <div class="col-xs-3">
                    <input type="number" ng-change="changeQty()" ng-model="item.qty" name="" value="" style="width: 40px;">
                  </div>
                  <div class="col-xs-3">
                    <span>Total :</span>
                  </div>
                  <div class="col-xs-4">
                    <p > <i class="fa fa-inr"></i>  {{(item.product.discountedPrice * item.qty).toFixed(2) }} </p>
                  </div>
                </div>
              </div>


              <div ng-if="cartItems" ng-repeat="c in cartItems">
                <div class="col-xs-12 col-sm-6">

                  <div class="row" style="padding-top:30px;">
                    <div class="col-xs-6">
                      <img style="width: 100%; height:65px;" class="img" ng-src="{{c.product.files[0].attachment}}" ng-if="c.product.files.length>0">
                      <img style="width: 100%; height:65px;" class="img" src="/static/images/ecommerce.jpg" ng-if="c.product.files==null">
                    </div>
                    <div class="col-xs-6">
                      <div class="row" style="padding:0px" >
                        <h6 ng-if="c.product.product.name.length>30" style="margin:0px;  height:50px;">{{c.product.product.name.slice(0,30)}}...</h6>
                        <h6 ng-if="c.product.product.name.length<=30" style="margin:0px;  height:50px;">{{c.product.product.name}}</h6>
                      </div>
                      <div class="row" style="padding:0px" >
                        <span  ng-if="c.product.product.discount>0" style="padding-right:5px;" > <strike> <i class="fa fa-inr"></i> {{c.product.product.price.toFixed(2)}} </strike> </span>
                        <span><i class="fa fa-inr"></i>{{c.product.product.discountedPrice.toFixed(2)}}</span>
                      </div>
                    </div>
                  </div>

                  <div class="row" style="padding-top:20px;" >
                    <div class="col-xs-2">
                      <span>Qty :</span>
                    </div>
                    <div class="col-xs-3">
                      <input type="number"  ng-change="changeQty(c)" ng-model="c.qty" name="" value="" style="width: 40px;">
                    </div>
                    <div class="col-xs-3">
                      <span>Total :</span>
                    </div>
                    <div class="col-xs-4">
                      <p > <i class="fa fa-inr"></i>  {{(c.product.product.discountedPrice * c.qty).toFixed(2) }} </p>
                    </div>
                  </div>

                </div>
              </div>

            </div>
          </div>

          <hr>

          <div class="row" style="margin-top:30px;padding:10px;">
            <div class="col-md-4">
              <div class="input-group">
                <input type="text" class="form-control" ng-model="data.promoCode" placeholder="Apply Promo Code..." />
                <span class="input-group-btn">
                  <button type="button" class="btn btn-primary" ng-click="applyPromo()">Apply</button>
                </span>
              </div>
            </div>
            <div class="col-md-8">
              <span style="color: {{msg=='Success'?'green':'red'}};" > {{msg}}</span>
              <!-- <span  ng-if="promo=='notApplied'" style="color: red;" > This Promocode is invalid! </span> -->
            </div>

          </div>

          <div class="row" style="margin-top:30px;padding:10px;">
            <div class="col-md-6 col-xs-6">
              <div class="row">
                <span style="font-size:20px;">Total </span>
                <br>
                <i class="fa fa-2x fa-inr"></i> <span ng-if="total!=totalAfterDiscount" style="font-size:20px; padding-right:10px; "> <strike> {{total.toFixed(2)}}  </strike> </span>
                <span style="font-size:20px;"> {{totalAfterDiscount.toFixed(2)}} </span>
              </div>
            </div>
            <div class="col-md-6 col-xs-6">
              <button type="button" class="btn btn-success pull-right" ng-click="next()">
                Next
              </button>
            </div>
          </div>

          <div class="row" ng-if="msg=='Success'" style="padding:15px;" >
            <span style="font-size:20px;">  Total Payable <br>
            <i class="fa fa-inr"></i> {{totalAfterPromo.toFixed(2)}}</span>
            <span style="font-size:18px; padding-left:10px; " class="text-muted" >(after {{promoDiscount}} % discount )</span>
          </div>

          <div class="row" style="padding:15px;">
            <p ng-if="total!=totalAfterDiscount && msg!='Success'" >You are saving <i class="fa fa-inr"></i>  {{(total - totalAfterDiscount).toFixed(2)}} on this order</p>
            <p ng-if="msg=='Success'" >You are saving <i class="fa fa-inr"></i>  {{(total - totalAfterPromo).toFixed(2)}} on this order</p>
          </div>

        </div>
        <!-- review page ends here  -->
        <div ng-if="data.stage == 'shippingDetails'">
          <div class="row">
            <div class="col-md-7 col-xs-12">
              <h4>Address</h4>
              <div class="form-group">
                <label for="street">Street : </label>
                <textarea ng-model="data.address.street" class="form-control" id="street" placeholder="Enter street.." ></textarea>
              </div>
              <div class="form-group">
                <label for="ldm">Land Mark : </label>
                <input type="text" class="form-control" id="ldm" ng-model="data.address.landMark" placeholder="Enter Landmark.." >
              </div>
              <div class="row">
                <div class="col-md-6 col-xs-6">
                  <div class="form-group">
                    <label for="city">City : </label>
                    <input ng-model="data.address.city" type="text" class="form-control" id="city" placeholder="Enter City.." >
                  </div>
                </div>
                <div class="col-md-6 col-xs-6">
                  <div class="form-group">
                    <label for="state">State : </label>
                    <input ng-model="data.address.state" type="text" class="form-control" id="state" placeholder="Enter State..">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 col-xs-6">
                  <div class="form-group">
                    <label for="pincode">Pincode : </label>
                    <input ng-model="data.address.pincode" type="text" class="form-control" id="pincode" placeholder="Enter Pincode..">
                  </div>
                </div>
                <div class="col-md-6 col-xs-6">
                  <div class="form-group">
                    <label for="country">Country : </label>
                    <input ng-model="data.address.country" type="text" class="form-control" id="country" placeholder="Enter Country..">
                  </div>
                </div>
              </div>
              <div class="row" style="margin-bottom:35px">
                <div class="col-xs-6">
                  <button type="button" class="btn btn-default" ng-click="resetAdd()" >
                    <i class="fa fa-refresh fa-lg"></i> &nbsp;Reset This Address
                  </button>

                  <!-- <i class="btn btn-default" ng-click="resetAdd()"><i class="fa fa-refresh fa-lg"></i> Reset This Address</i> -->
                </div>
                <div class="col-xs-6">
                  <button type="button" class="btn btn-warning" ng-click="saveAdd()" ng-if="data.address.pk == none" >
                    <i class="fa fa-star fa-lg"></i> &nbsp;Save for later use
                  </button>
                  <!-- <i class="pull-right btn btn-warning" ng-click="saveAdd()" ng-if="data.address.pk == none"><i class="fa fa-star fa-lg"></i> Save for later use</i> -->
                </div>
              </div>
              <h4>Contact Details</h4>
              <div class="form-group">
                <label for="mob">Mobile no. : </label>
                <input type="text" class="form-control" id="mob" ng-model="data.address.mobile" placeholder="Enter mobile.." >
              </div>
            </div>

            <div class="col-md-5 col-xs-12" style="padding-left:55px" ng-if="savedAddress.length>0">
              <span class="text-center"> <h4>Saved Addresses</h4><br> </span>
              <div class="row" ng-repeat="adr in savedAddress" style="padding:5px 30px;margin-bottom:15px">
                <div class="row card">
                  <div class="row text-center">
                    <div class="col-md-12 col-xs-12" style="font-size:19px">
                      <strong>{{adr.title}}</strong>
                    </div>
                  </div>
                  <div class="row" style="padding-left:15px;font-size:16px">
                    <div class="col-md-12 col-xs-12">
                      <strong>Landmark :</strong> {{adr.landMark}}
                    </div>
                  </div>
                  <div class="row" style="padding-left:15px;font-size:16px">
                    <div class="col-md-12 col-xs-12">
                      <strong>Street :</strong> {{adr.street}}
                    </div>
                  </div>
                  <div class="row" style="padding-left:15px;font-size:16px">
                    <div class="col-md-6 col-xs-6">
                      <strong>City :</strong> {{adr.city}}
                    </div>
                    <div class="col-md-6 col-xs-6">
                      <strong>State :</strong> {{adr.state}}
                    </div>
                  </div>
                  <div class="row" style="padding-left:15px;font-size:16px">
                    <div class="col-md-6 col-xs-6">
                      <strong>PinCode :</strong> {{adr.pincode}}
                    </div>
                    <div class="col-md-6 col-xs-6">
                      <strong>Country :</strong> {{adr.country}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class=" btn btn-block btn-primary" ng-click="ChangeAdd($index)">
                    Use This Address
                  </div>
                </div>
              </div>

            </div>

          </div>
          <div class="row" style="margin-top:55px">
            <button type="button" class="btn btn-default pull-left" ng-click="prev()">
              Go back
            </button>
            <button type="button" class="btn btn-success pull-right" ng-click="next()">
              Next
            </button>
          </div>
        </div>
        <!-- shippingDetails pane end here -->
        <div ng-if="data.stage == 'payment'">
          <div class="row">
            <!-- <h3>Select Mode of Payment</h3>
            <select class="form-control" ng-model="modeOfPayment">
              <option value="COD" >COD</option>
              <option value="card" >Card</option>
            </select> -->
          </div>
          <div class="row" style="padding:20px;">
            <span style="font-size:20px;">Select Mode of Payment<span >
          </div>
          <div class="row" style="padding:20px;">
            <form >
             <div class="form-group">
               <input type="radio" name="modeOfPayment" ng-model="data.modeOfPayment" value="COD"> COD <br>
             </div>
             <div class="form-group">
               <input type="radio" name="modeOfPayment" ng-model="data.modeOfPayment" value="Card"> Credit Card/ Debit Card / Net Banking / UPI
             </div>
            </form>

          </div>
          <div class="row" style="padding:20px;" >
            <p>
              <strong>Total amount payable :</strong>
              <span ng-if="msg=='Success'" >{{totalAfterPromo.toFixed(2)}}</span>
              <span ng-if="msg!='Success'" >{{totalAfterDiscount.toFixed(2)}}</span>
            </p>
          </div>

          <div class="row">
            <button type="button" class="btn btn-default pull-left" ng-click="prev()">
              Go back
            </button>
            <button type="button" class="btn btn-success btn-lg pull-right" ng-click="data.modeOfPayment=='COD'? order(): pay()">
              {{data.modeOfPayment=='COD'? 'Order': 'Pay'}}
            </button>
          </div>
        </div>
        <div ng-if="data.stage == 'onlinePayment'">
            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="row">
                                <h3 class="text-center">Payment Details</h3>
                            </div>
                        </div>
                        <div class="panel-body">
                            <form role="form">
                                <div class="row container-fluid">
                                  <div class="form-group">
                                    <label>Card Number</label>
                                    <input type="tel" class="form-control" placeholder="Valid Card Number" />
                                  </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-7 col-md-7">
                                        <div class="form-group">
                                          <label><span >Valid</span> Till</label>
                                          <input type="tel" class="form-control" placeholder="MM / YY" />
                                        </div>
                                    </div>
                                    <div class="col-xs-5 col-md-5 pull-right">
                                        <div class="form-group">
                                          <label>CV Code</label>
                                          <input type="tel" class="form-control" placeholder="CV Code" />
                                        </div>
                                    </div>
                                </div>
                                <div class="row container-fluid">
                                    <div class="form-group">
                                      <label>CARD HOLDER</label>
                                      <input type="text" class="form-control" placeholder="Card Holder's Name" />
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="panel-footer">
                            <div class="row text-center">
                              <button class="btn btn-success">Process payment</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
              <button type="button" class="btn btn-default pull-left" ng-click="prev()">
                Go back
              </button>
            </div>
        </div>
        <div ng-if="data.stage == 'processing'">
          <div class="col-md-4 col-md-offset-4">
            <div class="text-center">
              <i class="fa fa-spinner fa-spin fa-5x"></i> <br>
              <span>Please wait</span>
          </div>
        </div>
      </div>
      <div ng-if="data.stage == 'confirmation'">
        <h1>Thank you</h1>
        <h2>Your order details are as follows</h2>
        <strong> Order No. : </strong> {{data.order.id}}<br>
        <strong> Order date and time : </strong> {{data.order.created | date : 'dd-mm-yyyy: hh:mm:ss a'}}<br>
        <strong> Item ID : </strong> {{data.order.offer}}<br>
        <strong> Payment mode. : </strong> {{data.order.paymentType}}<br>
        <hr>
        <strong> Booking starts from : </strong> {{data.order.start | date : 'dd-mm-yyyy: hh:mm:ss a'}}<br>
        <strong> Booking ends at : </strong> {{data.order.end | date : 'dd-mm-yyyy: hh:mm:ss a'}}<br>
      </div>
    </div>


  </div>


</div>
</div>
