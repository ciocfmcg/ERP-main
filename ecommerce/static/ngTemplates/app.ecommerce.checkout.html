<div class="container-fluid" style="margin-top:20px;margin-bottom:20px;">
  <div class="col-md-10 col-md-offset-1 card bg-white" style="display:block;position:relative;min-height:760px;padding-left:0px;margin-bottom:30px;">

    <div class="col-md-2  bg-purple" style="position:absolute; height:100%;">
      <div class="row" style="padding-left:40%; padding-top:20px;">
        <i class="fa fa-shopping-cart fa-4x"></i>
      </div>
      <h4 style="text-align:center;text-transform:capitalize;color:white;">
        Checkout
      </h4>
      <hr>
      <div style="position:absolute;left:0px;width:100%;display:block;" class="bg-purple">
        <ul class="nav padded sidebar-checkout" style="width:100%;padding:0px;margin:0px;display:block;height:603px;">
          <li ng-class="{activeTab: data.stage == 'review'}">
            <a>
              <div align="center">
                <i class="fa fa-check fa-2x pull-left"></i> Review
              </div>
            </a>
          </li>
          <li ng-class="{activeTab: data.stage == 'shippingDetails'}">
            <a>
              <div align="center">
                <i class="fa fa-truck fa-2x pull-left"></i> Shipment details
              </div>
            </a>
          </li>
          <li ng-class="{activeTab: data.stage == 'payment'}">
            <a>
              <div align="center">
                <i class="fa fa-credit-card fa-2x pull-left"></i> Pay
              </div>
            </a>
          </li>
          <li ng-if="data.stage=='confirmation'" ng-class="{activeTab: data.stage == 'confirmation'}">
            <a>
              <div align="center">
                <i class="fa fa-check-circle fa-2x pull-left"></i> Confirmation
              </div>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="col-md-10 col-md-offset-2">
      <div class="container-fluid" style="margin-top:30px;">
        <div ng-if="data.stage == 'review'">
          <div class="row">
            <div class="container-fluid">

              <div class="row">
                <div class="col-md-3 ">
                  <span> <strong>Product</strong> </span>
                </div>
                <div class="col-md-offset-3 col-md-3 text-center">
                  <strong >Price</strong>
                </div>
                <div class="col-md-offset-1 col-md-1">
                  <strong>Qty</strong>
                </div>
                <div class="col-md-1">
                  <strong>Total</strong>
                </div>
              </div>

              <div ng-if="item">
                <div class="row" style="padding-top:30px;">
                  <div class="col-md-3">
                    <img style="width: 100%; height:100px;" class="img" ng-src="{{item.files[0].attachment}}" ng-if="item.files.length>0">
                    <img style="width: 100%; height:100px;" class="img" src="/static/images/ecommerce.jpg" ng-if="item.files==null">
                  </div>
                  <div class="col-md-3" style="height:100px;">
                    <h5 ng-if="item.product.name.length>30" style="margin:0px;  height:50px;">{{item.product.name.slice(0,30)}}...</h5>
                    <h5 ng-if="item.product.name.length<=30" style="margin:0px;  height:50px;">{{item.product.name}}</h5>
                  </div>
                  <div class="col-md-3">
                    <div class="row container-fluid">
                      <div class="col-md-6">
                          <span class="pull-right"  ng-if="item.product.discount>0" > <strike> <i class="fa fa-inr"></i> {{item.product.price.toFixed(2)}} </strike> </span>
                      </div>
                      <div class="col-md-6">
                          <span><i class="fa fa-inr"></i>{{item.product.discountedPrice.toFixed(2)}}</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-1">
                    <p> X </p>
                  </div>
                  <div class="col-md-1">
                    <input type="number" ng-change="changeQty()" ng-model="item.qty" name="" value="" style="width: 60px;">
                  </div>
                  <div class="col-md-1">
                    <p> <i class="fa fa-inr"></i> {{(item.product.discountedPrice * item.qty).toFixed(2) }} </p>
                  </div>
                </div>
              </div>

              <div ng-if="cartItems" ng-repeat="c in cartItems">
                <div class="row" style="padding-top:30px;">
                  <div class="col-md-3">
                    <img style="width: 100%; height:100px;" class="img" ng-src="{{c.product.files[0].attachment}}" ng-if="c.product.files.length>0">
                    <img style="width: 100%; height:100px;" class="img" src="/static/images/ecommerce.jpg" ng-if="c.product.files==null">
                  </div>
                  <div class="col-md-3" style="height:100px;">
                    <h5 ng-if="c.product.product.name.length>30" style="margin:0px;  height:50px;">{{c.product.product.name.slice(0,30)}}...</h5>
                    <h5 ng-if="c.product.product.name.length<=30" style="margin:0px;  height:50px;">{{c.product.product.name}}</h5>
                  </div>
                  <div class="col-md-3">
                    <div class="row container-fluid">
                      <div class="col-md-6">
                          <span class="pull-right"  ng-if="c.product.product.discount>0" > <strike> <i class="fa fa-inr"></i> {{c.product.product.price.toFixed(2)}} </strike> </span>
                      </div>
                      <div class="col-md-6">
                          <span><i class="fa fa-inr"></i> {{c.product.product.discountedPrice.toFixed(2)}}</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-1">
                    <p> X </p>
                  </div>
                  <div class="col-md-1">
                    <input type="number" ng-change="changeQty(c)" ng-model="c.qty" name="" value="" style="width: 60px;">
                  </div>
                  <div class="col-md-1">
                    <p > <i class="fa fa-inr"></i> {{(c.product.product.discountedPrice * c.qty).toFixed(2) }} </p>
                  </div>
                </div>
              </div>

            </div>
          </div>
          <hr>

          <div class="row" style="margin-top:30px;padding:10px;">
            <div class="col-md-4">
              <div class="input-group">
                <input type="text" class="form-control" ng-model="promoCode" placeholder="Apply Promo Code..." />
                <span class="input-group-btn">
                  <button type="button" class="btn btn-primary" ng-click="applyPromo(promoCode)">Apply</button>
                </span>
              </div>
            </div>
            <div class="col-md-8">
              <span ng-if="promo =='applied'" style="color: green;" > Promocode Applied! </span>
              <span  ng-if="promo=='notApplied'" style="color: red;" > This Promocode is invalid! </span>
            </div>

          </div>

          <div class="row" style="margin-top:30px;padding:10px;" >
            <div class="col-md-6">
              <div class="row">
                <span style="font-size:20px;">Total </span>
                <br>
                <i class="fa fa-2x fa-inr"></i> <span ng-if="total!=totalAfterDiscount" style="font-size:20px;"> <strike> {{total.toFixed(2)}}  </strike> </span>
                <span style="font-size:20px;"> {{totalAfterDiscount.toFixed(2)}} </span>
              </div>
              <!-- <div ng-if="promo=='applied'" class="row">
                <p> Promocode discount {{promoDiscount}} % </p>
              </div> -->
              <div ng-if="promo=='applied'" class="row">
                <span style="font-size:20px;">  Total Payable <br>
                <i class="fa fa-inr"></i> {{totalAfterPromo.toFixed(2)}}</span>
                <span style="font-size:18px; padding-left:10px; " class="text-muted" >(promocode discount {{promoDiscount}} % )</span>
              </div>
              <div class="row">
                <p ng-if="total!=totalAfterDiscount && promo!='applied'" >You are saving <i class="fa fa-inr"></i>  {{(total - totalAfterDiscount).toFixed(2)}} on this order</p>
                <p ng-if="promo =='applied'" >You are saving <i class="fa fa-inr"></i>  {{(total - totalAfterPromo).toFixed(2)}} on this order</p>
              </div>
            </div>
            <div class="col-md-6">
              <button type="button" class="btn btn-success pull-right" ng-click="next()">
                Next
              </button>
            </div>
          </div>
        </div>
        <!-- review page ends here  -->
        <div ng-if="data.stage == 'shippingDetails'">
          <div class="row">
            <div class="col-md-7">
              <h4>Address</h4>
              <div class="form-group">
                <label for="street">Street : </label>
                <textarea ng-model="data.address.street" class="form-control" id="street"></textarea>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="city">City : </label>
                    <input ng-model="data.address.city" type="text" class="form-control" id="city">
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="state">State : </label>
                    <input ng-model="data.address.state" type="text" class="form-control" id="state">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="pincode">Pincode : </label>
                    <input ng-model="data.address.pincode" type="text" class="form-control" id="pincode">
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="country">Country : </label>
                    <input ng-model="data.address.country" type="text" class="form-control" id="country">
                  </div>
                </div>
              </div>
              <div class="row" style="margin-bottom:35px">
                <span><i class="btn btn-default" ng-click="resetAdd()"><i class="fa fa-refresh fa-lg"></i> Reset This Address</i><i class="pull-right btn btn-warning" ng-click="saveAdd()" ng-if="data.address.pk == none"><i class="fa fa-star fa-lg"></i> BookMark This Address</i></span>
              </div>
              <h4>Contact Details</h4>
              <div class="form-group">
                <label for="mob">Mobile no. : </label>
                <input type="text" class="form-control" id="mob">
              </div>
            </div>

            <div class="col-md-5" style="padding-left:55px" ng-if="savedAddress.length>0">
              <span class="text-center"> <h4>Saved Addresses</h4><br> </span>
              <div class="row" ng-repeat="adr in savedAddress" style="padding:5px 30px;margin-bottom:15px">
                <div class="row card">
                  <div class="row text-center">
                    <div class="col-md-12" style="font-size:19px">
                      <strong>{{adr.title}}</strong>
                    </div>
                  </div>
                  <div class="row" style="padding-left:15px;font-size:16px">
                    <div class="col-md-12">
                      <strong>Street :</strong> {{adr.street}}
                    </div>
                  </div>
                  <div class="row" style="padding-left:15px;font-size:16px">
                    <div class="col-md-6">
                      <strong>City :</strong> {{adr.city}}
                    </div>
                    <div class="col-md-6">
                      <strong>State :</strong> {{adr.state}}
                    </div>


                  </div>
                  <div class="row" style="padding-left:15px;font-size:16px">
                    <div class="col-md-6">
                      <strong>PinCode :</strong> {{adr.pincode}}
                    </div>
                    <div class="col-md-6">
                      <strong>Country :</strong> {{adr.country}}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class=" btn btn-block btn-primary" ng-click="ChangeAdd($index)">
                    Use This Address
                  </div>
                </div>
              </div>

            </div>

          </div>
          <div class="row" style="margin-top:55px">
            <button type="button" class="btn btn-default pull-left" ng-click="prev()">
              Go back
            </button>
            <button type="button" class="btn btn-success pull-right" ng-click="next()">
              Next
            </button>
          </div>
        </div>
        <!-- shippingDetails pane end here -->
        <div ng-if="data.stage == 'payment'">
          <div class="row">
            <!-- <h3>Select Mode of Payment</h3>
            <select class="form-control" ng-model="modeOfPayment">
              <option value="COD" >COD</option>
              <option value="card" >Card</option>
            </select> -->
          </div>
          <div class="row" style="padding:20px;">
            <span style="font-size:20px;">Mode of Patment : COD<span >
          </div>
          <div class="row" style="padding:20px;" >
            <p>
              <strong>Total amount payable :</strong>{{total.toFixed(2)}}
            </p>
          </div>

          <div class="row">
            <button type="button" class="btn btn-default pull-left" ng-click="prev()">
              Go back
            </button>
            <button type="button" class="btn btn-success btn-lg pull-right" ng-click="pay()">
              Pay
            </button>
          </div>
        </div>
        <div ng-if="data.stage == 'processing'">
          <div class="col-md-4 col-md-offset-4">
            <div class="text-center">
              <i class="fa fa-spinner fa-spin fa-5x"></i> <br>
              <span>Please wait</span>
          </div>
        </div>
      </div>
      <div ng-if="data.stage == 'confirmation'">
        <h1>Thank you</h1>
        <h2>Your order details are as follows</h2>
        <strong> Order No. : </strong> {{data.order.id}}<br>
        <strong> Order date and time : </strong> {{data.order.created | date : 'dd-mm-yyyy: hh:mm:ss a'}}<br>
        <strong> Item ID : </strong> {{data.order.offer}}<br>
        <strong> Payment mode. : </strong> {{data.order.paymentType}}<br>
        <hr>
        <strong> Booking starts from : </strong> {{data.order.start | date : 'dd-mm-yyyy: hh:mm:ss a'}}<br>
        <strong> Booking ends at : </strong> {{data.order.end | date : 'dd-mm-yyyy: hh:mm:ss a'}}<br>
      </div>
    </div>


  </div>


</div>
</div>
